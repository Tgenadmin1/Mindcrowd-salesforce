<apex:page showHeader="false" sidebar="false" applyHtmlTag="false" controller="ResetPassword" extensions="ResetPassword" action="{!MyActionMethod}">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0, minimal-ui" />

    <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Varela+Round&amp;font-display: swap;"
    />
    <link rel="shortcut icon" href="{!URLFOR($Resource.favicon)}" />
    <link rel="stylesheet" href="/s/sfsites/c/resource/mindCrowdTheme?v=1.1652794992862" />
    <style>
        body {
            padding-top: 70px !important;
            display: none;
        }

        .center {
            margin: auto;
            width: 50%;
            border: 1px solid;
            padding: 8px;
        }

        .slds-builder-header_container {
            position: fixed;
            width: 100%;
            top: 0;
            left: 0;
            z-index: 99999;
        }

        img {
            max-width: 100%;
            height: auto;
        }

        .mainContentArea {
            width: 76.5% !important;
        }

        .slds-form-element .slds-input {
            border: 1px solid;
            border-radius: 5px;
            padding: 0 10px;
        }

        .slds-grid {
            display: flex;
        }

        .slds-button {
            background-image: none !important;

        }

        .change-pwd {
            font-size: 18px !important;
        }

        /* .custPopup{
        background-color: white;
       
        z-index: 9999;
        left: 50%;
        padding: 45px 45px ;
        font-size: 20px;
        position: absolute;
     
        width: 500px;
        margin-left: -250px;
        bottom: 200px;
        border-radius: 7px;
    } */

        .slds-modal__container {
            display: flex;
            justify-content: center;
            margin: auto;
            height: 100%;
        }

        .custPopup {
            background-color: white;
            z-index: 9999;
            /* left: 50%; */
            padding: 45px 45px;
            /* font-size: 20px; */
            /* position: absolute; */
            width: 500px;
            /* margin-left: -250px; */
            /* bottom: 200px; */
            border-radius: 7px;
            margin: auto;
            position: relative;
            color: #274255;
            font-size: 25px;
        }

        .slds-modal__header {
            padding: 0 !important;
        }

        .popupBackground {
            /* background-color:black;
        opacity: 0.20;
        filter: alpha(opacity = 20); */
            /* background: rgba(76, 175, 80, 0.3) ; */
            background: var(--slds-c-backdrop-color-background, var(--sds-c-backdrop-color-background, var(--lwc-colorBackgroundTempModalTint, rgba(8, 7, 7, 0.6))));
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 9998;
        }

        .input-btn {
            border: none;
            cursor: pointer;
            background: #6a6797;
            color: #fff;
            border: none;
            padding: 15px 30px 13px;
            font-family: 'Whitneybook', Helvetica, Arial, sans-serif;
            font-weight: 400;
            line-height: 1.2em;
            position: relative;
            text-align: center;
            max-width: 100%;
            font-style: normal;
            border-radius: 7px;
            font-size: 18px;
            margin-top: 24px;

            /* text-transform: uppercase; */
        }

        .input-btn:hover {
            opacity: 0.8;
            transition: ease-in-out;
        }

        .slds-modal__header .slds-modal__close {
            top: -17px;
            right: -9px;
            position: absolute;

        }

        .slds-modal__header .slds-modal__close .slds-button {
            color: #fff;
            padding: 5px 8px 5px;
            font-size: 14px;
            font-weight: 400;
            min-width: auto;

        }

        .slds-modal__header .slds-modal__close .slds-button:hover {
            background-color: #6a6797 !important;
        }

        .h-top-heading {
            margin-top: 70px;
            margin-bottom: 50px;
        }

        .display-none {
            display: none;
        }

        .display-block {
            display: block !important;
        }

        @media (max-width: 767px) {
            .mainContentArea {
                width: 91.5% !important;
            }
            .slds-button {
                width: 100%;
                max-width: 100%;
            }
            .input-btn {

                background: #6a6797;
                color: #fff;
                border: none;

            }
            .slds-form-element__control {
                display: inline-block;
            }
            .mainCrowd-inner-box .slds-form-element .slds-form-element__label {
                font-size: 20px;
                font-weight: normal;
                font-family: 'Whitneybook', Helvetica, Arial, sans-serif;
                word-break: break-word !important;
                display: inline-block;
            }
            .Participation-title-box,
            .participation-form-item-row {
                padding: 0 !important;
            }
            .participation-form-text-aria {
                padding: 20px;
            }
            .set-w-50 {
                min-width: 100% !important;
            }
            .h-top-heading {
                margin-top: 50px;
                margin-bottom: 20px;
            }
        }
    </style>
    <div class="main-container-box">
        <div class="slds-builder-header_container">
            <div class="mc-header">
                <div class="mc-header-container">

                    <div class="logo-container">
                        <!-- <img src="{!$Resource.mindcrowd_style + '/images/mindcrowd-logo.png'}"/> -->
                        <img src="{!$Resource.mindcrowd_style + '/images/mindcrowd.png'}" sizes="(max-width: 328px) 100vw, 328px" height="100" width="300"
                            alt="MindCrowd" title="MindCrowd" />
                    </div>
                </div>
            </div>



        </div>
    </div>
   
<apex:outputPanel rendered="{!IF(language!=null && language=='en_US',true,false)}">
    <div class="h-top-heading">Welcome to MindCrowd VIP</div>
    </apex:outputPanel>
    <apex:outputPanel rendered="{!IF(language!=null && language=='es',true,false)}">
    <div class="h-top-heading">BIENVENIDO A MINDCROWD VIP</div>
    </apex:outputPanel>
    <apex:form id="frm" html-autocomplete="off">
        <apex:outputPanel rendered="{!IF(language!=null && language=='en_US',true,false)}">
        <div class="mainContentArea">
            
            <div class="login-text">
                <p>Choose a password as requested below.</p>
                
                <p> You will then be taken to your personal MindCrowd VIP dashboard.</p>

            </div>
            <div class="mainCrowd-outer-box " style="position: unset">
                <div class="mainCrowd-inner-box inner_content1" style="position: unset">
                    <div class="slds-form-element">

                        Login Name: {!$User.username}
                    </div>

                    <div class="slds-form-element">

                        <p style="margin-bottom: 0;">Choose a password for {!$User.username} You must adhere to the following password rules:</p>
                        <div style="display: flex;">
                            <input type="radio" style=" margin-top: 10px; margin-left: 0;" id="8Character" name="fav_language" value="HTML" disabled="true"
                            />
                            <label for="8Character">Your password must be at least 8 characters long</label>
                            <br/>
                        </div>
                        <div style="display: flex;">
                            <input type="radio" style=" margin-top: 10px; margin-left: 0;" id="1Letter" name="fav_language" value="HTML" disabled="true"
                            />
                            <label for="1Letter">Your password must include letters and numbers</label>
                            <br/>
                        </div>


                    </div>
                    <br/>
                    <div class="  require slds-form-element bt-0">
                        <label for="NewPassword" class="slds-form-element__label slds-no-flex">Password</label>
                        <div class="slds-form-element__control slds-grow">

                            <apex:inputSecret id="NewPassword" value="{!inputText1}" styleClass="slds-input set-w-50" Html-placeholder="Enter the New Password"
                            />
                        </div>


                    </div>
                    <div class=" require slds-form-element bt-0">
                        <label for="ConfirmPassword" class="slds-form-element__label slds-no-flex">Re-Enter your Password to Confirm It</label>
                        <div class="slds-form-element__control slds-grow">

                            <apex:inputSecret id="ConfirmPassword" value="{!inputText2}" styleClass="slds-input set-w-50" Html-placeholder="Enter the Confirm Password"
                            />
                        </div>



                    </div>

                    <!-- <apex:outputPanel layout="block" style="overflow:auto; width:auto;height:100px" > -->


                    <div id="pg">
                          <!-- <apex:pageMessages id="msgId" /> -->
                        <div class="magenta-btn" style=" margin-top: 20px;">
                            <center>
                                <apex:commandButton id="submitBtn" value="CHANGE PASSWORD" styleClass="change-pwd slds-button slds-button_brand" action="{!saveTextValue}"
                                    rerender="msgId">
                                </apex:commandButton>
                            </center>
                        </div>
                        <!-- <div class="login-button">
                            <center>
                                <input type="button" value="I will join MindCrowd VIP later" class="input-btn slds-button slds-button_success text-center" onclick="deleteAllCookies()"/>
                                <input type="button" value="test" class="input-btn slds-button slds-button_success text-center" onclick="deleteAllCookies()"/>
                               
                            </center>
                        </div> -->


                        <!-- <apex:commandButton value="Show Pop up" action="{!ShowPopup}" rerender="tstpopup"/> -->
                        <apex:outputPanel id="msgId">
                            <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}">
                                <div class="slds-modal__container">
                                    <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">

                                        <div class="slds-modal__header">
                                            <div class="slds-modal__close">
                                                <apex:commandButton value="X" action="{!ClosePopup}" styleClass="slds-button slds-button_icon slds-button_icon-bare slds-button_icon-inverse"
                                                    rerender="msgId" />
                                            </div>
                                        </div>
                                        {!errormessage}

                                    </apex:outputPanel>
                                </div>

                            </apex:outputPanel>



                        </apex:outputPanel>


                        <div id="test" class="display-none">
                            <apex:outputPanel id="goHome">
                                <apex:outputPanel styleClass="popupBackground" layout="block">
                                    <div class="slds-modal__container">
                                        <apex:outputPanel styleClass="custPopup" layout="block">

                                            <div class="slds-modal__header">
                                                <div class="slds-modal__close">
                                                    <!-- <apex:commandButton value="X"  onclick="deleteAllCookies()" styleClass="slds-button slds-button_icon slds-button_icon-bare slds-button_icon-inverse" -->
                                                    <!-- /> -->
                                                    <a href="#" onclick="deleteAllCookies()" value="test" class="slds-button slds-button_icon slds-button_icon-bare slds-button_icon-inverse"
                                                        style="text-decoration: none;">X</a>
                                                </div>
                                            </div>

                                            Your session has expired. Please click on the pink button that says
                                            <b>“Click here to become a MindCrowd VIP”</b> to restart. This button can be found
                                            in the welcome email from MindCrowd.


                                        </apex:outputPanel>
                                    </div>

                                </apex:outputPanel>



                            </apex:outputPanel>

                        </div>


                    </div>





                </div>
            </div>
        </div>


       
        </apex:outputPanel>
    </apex:form>
    
    <!-- Spanish Content -->
    
    
    <apex:form id="frm2" html-autocomplete="off">
        <apex:outputPanel rendered="{!IF(language!=null && language=='es',true,false)}">
        <div class="mainContentArea">
            
            <div class="login-text">
                <p>Elegir una contraseña como se solicita a continuación.</p>
                
                <p> A continuación, accederá a su panel de control personal de MindCrowd VIP.</p>

            </div>
            <div class="mainCrowd-outer-box " style="position: unset">
                <div class="mainCrowd-inner-box inner_content1" style="position: unset">
                    <div class="slds-form-element">

                        Nombre de usuario: {!$User.username}
                    </div>

                    <div class="slds-form-element">

                        <p style="margin-bottom: 0;">Elija una contraseña para {!$User.username} Debe respetar las siguientes normas para contraseñas:</p>
                        <div style="display: flex;">
                            <input type="radio" style=" margin-top: 10px; margin-left: 0;" id="8Character" name="fav_language" value="HTML" disabled="true"
                            />
                            <label for="8Character">Su contraseña debe tener al menos 8 caracteres</label>
                            <br/>
                        </div>
                        <div style="display: flex;">
                            <input type="radio" style=" margin-top: 10px; margin-left: 0;" id="1Letter" name="fav_language" value="HTML" disabled="true"
                            />
                            <label for="1Letter">Su contraseña debe incluir letras y números</label>
                            <br/>
                        </div>


                    </div>
                    <br/>
                    <div class="  require slds-form-element bt-0">
                        <label for="NewPassword" class="slds-form-element__label slds-no-flex">Contraseña</label>
                        <div class="slds-form-element__control slds-grow">

                            <apex:inputSecret id="NewPassword" value="{!inputText1}" styleClass="slds-input set-w-50" Html-placeholder="Introduzca la nueva contraseña"/>
                        </div>


                    </div>
                    <div class=" require slds-form-element bt-0">
                        <label for="ConfirmPassword" class="slds-form-element__label slds-no-flex">Vuelva a introducir la contraseña para confirmarla</label>
                        <div class="slds-form-element__control slds-grow">

                            <apex:inputSecret id="ConfirmPassword" value="{!inputText2}" styleClass="slds-input set-w-50" Html-placeholder="Introduzca la confirmación de la contraseña"
                            />
                        </div>



                    </div>

                    <!-- <apex:outputPanel layout="block" style="overflow:auto; width:auto;height:100px" > -->

                    <div id="pg">
                        
                        <!-- <apex:pageMessages id="msgId" /> -->
                        <div class="magenta-btn" style=" margin-top: 20px;">
                            <center>
                                <apex:commandButton id="submitBtn" value="CAMBIAR LA CONTRASEÑA" styleClass="change-pwd slds-button slds-button_brand" action="{!saveTextValue}"
                                    rerender="msgId">
                                </apex:commandButton>
                            </center>
                        </div>
                        <!-- <div class="login-button">
                            <center>
                                <input type="button" value="I will join MindCrowd VIP later" class="input-btn slds-button slds-button_success text-center" onclick="deleteAllCookies()"/>
                                <input type="button" value="test" class="input-btn slds-button slds-button_success text-center" onclick="deleteAllCookies()"/>
                               
                            </center>
                        </div> -->


                        <!-- <apex:commandButton value="Show Pop up" action="{!ShowPopup}" rerender="tstpopup"/> -->
                        <apex:outputPanel id="msgId">
                            <apex:outputPanel styleClass="popupBackground" layout="block" rendered="{!displayPopUp}">
                                <div class="slds-modal__container">
                                    <apex:outputPanel styleClass="custPopup" layout="block" rendered="{!displayPopUp}">

                                        <div class="slds-modal__header">
                                            <div class="slds-modal__close">
                                                <apex:commandButton value="X" action="{!ClosePopup}" styleClass="slds-button slds-button_icon slds-button_icon-bare slds-button_icon-inverse"
                                                    rerender="msgId" />
                                            </div>
                                        </div>
                                        {!errormessage}

                                    </apex:outputPanel>
                                </div>

                            </apex:outputPanel>



                        </apex:outputPanel>


                        <div id="test" class="display-none">
                            <apex:outputPanel id="goHome">
                                <apex:outputPanel styleClass="popupBackground" layout="block">
                                    <div class="slds-modal__container">
                                        <apex:outputPanel styleClass="custPopup" layout="block">

                                            <div class="slds-modal__header">
                                                <div class="slds-modal__close">
                                                    <!-- <apex:commandButton value="X"  onclick="deleteAllCookies()" styleClass="slds-button slds-button_icon slds-button_icon-bare slds-button_icon-inverse" -->
                                                    <!-- /> -->
                                                    <a href="#" onclick="deleteAllCookies()" value="test" class="slds-button slds-button_icon slds-button_icon-bare slds-button_icon-inverse"
                                                        style="text-decoration: none;">X</a>
                                                </div>
                                            </div>

                                            Your session has expired. Please click on the pink button that says
                                            <b>“Click here to become a MindCrowd VIP”</b> to restart. This button can be found
                                            in the welcome email from MindCrowd.


                                        </apex:outputPanel>
                                    </div>

                                </apex:outputPanel>



                            </apex:outputPanel>

                        </div>


                    </div>





                </div>
            </div>
        </div>


       
        </apex:outputPanel>
    </apex:form>

    <div class="footerArea" style="margin-top: 40px;">
        <div data-region-name="footer" data-item-id="dd9675b8-9602-45fc-b564-591338db5d74">
            <div data-priority="" data-item-id="27da3858-35d1-4c33-902e-1707fcff8f08" class="ui-widget">
                <!--render facet: 128:0-->
                <div class="copyright cMindCrowdCommunityFooter">
                    <div class="copyright-content">
                        <p style="margin: 0; float:left;"> <span id="copyrightyear"></span>  © All Rights Reserved MindCrowd •
                            <a href="https://staging-mindcrowd.kinsta.cloud/privacy-policy/" data-aura-rendered-by="135:0">Cookie &amp; Privacy Policy</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            domainURLOld = getCookie('sid');
            myInterval = setInterval(myTimer, 4000);
            var goHomePopup = false;
            function myTimer() {
                if (getCookie('sid') == null) {
                    //document.getElementById('test').className -= ' display-none';
                }
            }
            function getCookie(name) {
                cookieString = "; " + document.cookie;
                cookieString = cookieString.replace('LSKey-c$', '');
                parts = cookieString.split("; " + name + "=");
                if (parts.length === 2) {
                    return parts.pop().split(";").shift();
                }
                return null;
            }

            var today = new Date();
            document.getElementById('copyrightyear').innerHTML = today.getFullYear();
            //var copyrightyear = today.getFullYear();
            


        });
        var myurl = window.location.href;
        function deleteAllCookies() {
            window.location.href = "{!$Label.Community_Url}" + '/s/'//"https://dev-mindcrowd-game.cs194.force.com/MindCrowd/s/";

        }

        if (!myurl.includes("ChangePassword")) {
            //document.cookie = "{!domainURL}";
            //window.location.href = myurl;

        }

    </script>

    <style>
        body {

            display: block;
        }
    </style>

</apex:page>